<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TFM Express</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="tfmstyle.css" />
  </head>
  <body>
    <section id="CampaignType" class="container-fluid">
      <div class="text-center">
        <h2 class="text-center section-heading">Campaign Type</h2>
      </div>

      <h4>Choose Your Campaign Type</h4>

      <div class="row justify-content-around">
        <div class="col-xl-2 col-xxl-2 col-lg-4 col-6 text-center">
          <img
            class="campaign-type-img"
            src="LeadGeneration.png"
            alt="Lead Generation Img"
          />
          <br />
          <input
            type="radio"
            class="radio-btn"
            value="500"
            name="campaign-type"
            id="leadGeneration500"
            required
            onclick="selectedCampaignType(); "
          />
        </div>
        <div class="col-xl-2 col-xxl-2 col-lg-4 col-6 text-center">
          <img
            class="campaign-type-img"
            src="EventPromotion.png"
            alt="Event Promotion Img"
          />
          <br />
          <input
            type="radio"
            name="campaign-type"
            value="400"
            id="eventPromotion400"
            onclick="selectedCampaignType()"
          />
        </div>
        <div class="col-xl-2 col-xxl-2 col-lg-4 col-6 text-center">
          <img
            class="campaign-type-img"
            src="SocialCompetition.png"
            alt="Social Competition Img"
          />
          <br />
          <input
            type="radio"
            name="campaign-type"
            value="500"
            id="socialCompetition500"
            onclick="selectedCampaignType()"
          />
        </div>
        <div class="col-xl-2 col-xxl-2 col-lg-4 col-6 text-center">
          <img
            class="campaign-type-img"
            src="SiteTraffic.png"
            alt="Site Traffic"
          />
          <br />
          <input
            type="radio"
            name="campaign-type"
            value="400"
            id="siteTraffic400"
            onclick="selectedCampaignType()"
          />
        </div>
        <div class="col-xl-2 col-xxl-2 col-lg-4 col-6 text-center">
          <img
            class="campaign-type-img"
            src="SocialFollowingGrowth.png"
            alt="Social Growth Img"
          />
          <br />
          <input
            type="radio"
            name="campaign-type"
            value="400"
            id="socialGrowth400"
            onclick="selectedCampaignType()"
          />
        </div>
      </div>
    </section>

    <section id="CampaignDetails">
      <div class="text-center">
        <h2 class="text-center section-heading">Campaign Details</h2>
      </div>

      <h3 class="mx-4">Please Enter Campaign Details</h3>
      <br />
      <div class="row justify-content-around mx-3">
        <div class="mb-4">
          <label for="businessName" class="form-label">Business Name</label>
          <input
            type="text"
            class="form-control"
            id="businessName"
            name="business-name"
            required
            onchange="checkCampaignDetails();"
          />
        </div>
        <div class="mb-4">
          <label for="eventDetails" class="form-label"
            >Event/Offer Details</label
          >
          <input
            type="text"
            class="form-control"
            required
            id="eventDetails"
            name="event-details"
            onchange="checkCampaignDetails();"
          />
        </div>
        <div class="mb-4">
          <label for="keyMessage" class="form-label">Key Messages</label>
          <input
            type="text"
            class="form-control"
            required
            id="keyMessage"
            name="key-message"
            onchange="checkCampaignDetails();"
          />
        </div>
        <div class="mb-4 col-6">
          <label for="eventDate" class="form-label">Campaign Start Date</label>
          <input
            type="date"
            class="form-control"
            required
            id="eventStart"
            name="start-date"
            onchange="checkCampaignDetails();"
          />
        </div>
        <div class="mb-4 col-6">
          <label for="eventDate" class="form-label">Campaign End Date</label>
          <input
            type="date"
            class="form-control"
            required
            id="eventEnd"
            name="end-date"
            onchange="checkCampaignDetails();"
          />
        </div>
      </div>
    </section>
    <section id="CampaignExtras">
      <div class="text-center">
        <h2 class="text-center section-heading">Campaign Extras</h2>
      </div>
      <h3 class="mx-4">Choose Any Campaign Extras</h3>
      <br />
      <div class="row justify-content-around">
        <div class="col-xl-3 col-lg-3 col-6 text-center">
          <img
            class="campaign-type-img"
            src="LeadPage.png"
            alt="Lead Generation Img"
          />
          <br />
          <input
            type="checkbox"
            class="radio-btn"
            value="150"
            name="campaign-extras[]"
            id="leadPage150"
            onclick="totalBudget2(this)"
          />
        </div>
        <div class="col-xl-3 col-lg-3 col-6 text-center">
          <img
            class="campaign-type-img"
            src="ISA.png"
            alt="Lead Generation Img"
          />
          <br />
          <input
            type="checkbox"
            name="campaign-extras[]"
            id="instagramStoryAnimation300"
            value="300"
            onclick="totalBudget2(this)"
          />
        </div>
        <div class="col-xl-3 col-lg-3 col-6 text-center">
          <img
            class="campaign-type-img"
            src="CarouselCreative.png"
            alt="Lead Generation Img"
          />
          <br />
          <input
            type="checkbox"
            name="campaign-extras[]"
            id="carouselCreative300"
            value="300"
            onclick="totalBudget2(this)"
          />
        </div>
        <div class="col-xl-3 col-lg-3 col-6 text-center">
          <img
            class="campaign-type-img"
            src="LeadAutomation.png"
            alt="Lead Generation Img"
          />
          <br />
          <input
            type="checkbox"
            name="campaign-extras[]"
            id="leadAutomation180"
            value="180"
            onclick="totalBudget2(this)"
          />
        </div>
      </div>
    </section>

    <section id="ClientDetails">
      <div class="text-center">
        <h2 class="text-center section-heading">Client Details</h2>
      </div>
      <h3 class="mx-4">Provide Your Contact & Invoicing Details:</h3>
      <br />
      <div class="row mx-3 justify-content-around">
        <div class="mb-4">
          <label for="clientName" class="form-label">Name</label>
          <input
            type="text"
            class="form-control"
            required
            id="clientName"
            name="client-name"
            placeholder="Enter Your Name"
            onchange="checkClientDetails();"
          />
        </div>
        <div class="my-4">
          <label for="clientEmail">Email address</label>
          <input
            type="email"
            required
            class="form-control"
            id="clientEmail"
            aria-describedby="emailHelp"
            placeholder="Enter email"
            name="client-email"
            onchange="checkClientDetails();"
          />
          <small id="emailHelp" class="form-text text-muted"
            >We'll never share your email with anyone else.</small
          >
        </div>
        <div class="mb-4">
          <label for="clientNumber" class="form-label">Phone Number</label>
          <input
            type="number"
            class="form-control"
            required
            id="clientNumber"
            name="client-number"
            onchange="checkClientDetails();"
          />
        </div>
      </div>
    </section>

    <section id="MediaBudget">
      <div class="text-center">
        <h2 class="text-center section-heading">Media Budget</h2>
      </div>
      <h3 class="mx-4">Select Your Budget For Media Spend</h3>
      <br />
      <div class="row justify-content-around">
        <div class="col-4 text-center">
          <img
            class="campaign-extras-img"
            src="500.png"
            alt="Lead Generation Img"
          />
          <br />
          <input
            type="radio"
            value="500"
            class="radio-btn"
            name="budget"
            id="budget500"
            onchange="checkCustomRadio(); totalBudget3(this); "
            onclick="selectedBudget(true)"
            required
          />
        </div>
        <div class="col-4 text-center">
          <img
            class="campaign-extras-img"
            src="1000.png"
            alt="Lead Generation Img"
          />
          <br />
          <input
            type="radio"
            value="1000"
            name="budget"
            id="budget1000"
            onchange="checkCustomRadio(); totalBudget3(this); "
            onclick="selectedBudget(true)"
          />
        </div>
        <div class="col-4 text-center">
          <img
            class="campaign-extras-img"
            src="1500.png"
            alt="Lead Generation Img"
          />
          <br />
          <input
            type="radio"
            value="1500"
            name="budget"
            id="budget1500"
            onchange="checkCustomRadio(); totalBudget3(this);"
            onclick="selectedBudget(true)"
          />
        </div>

        <div class="text-center col-12 custom-budget">
          <label for="customAmountInput" class="form-label"
            >Enter Custom Budget($)
          </label>
          <br />
          <input type="number" name="cbudget" id="customAmountInput" min="500"
          onchange=" selectedCustomBudget()" //totalBudget3(this);
          onclick="selectedBudget(false);selectedCustomBudget();" />
          <br />
          <br />
          <input
            type="radio"
            name="budget"
            id="customAmountRadio"
            onchange="checkCustomRadio();"
            onclick="selectedBudget(false)"
          />
        </div>
      </div>
    </section>
    <div
      class="container progress-bar-section d-flex flex-column justify-content-center align-items-center"
    >
      <div id="progressBar">
        <div class="progress-container">
          <div class="progress-bar" id="progress"></div>
          <div class="circle z-active">1</div>
          <div class="circle">2</div>
          <div class="circle">3</div>
          <div class="circle">4</div>
          <div class="circle">5</div>

          <div class="circle">6</div>
        </div>
        <div class="text-center">
          <button class="btn" id="prev" disabled>Prev</button>

          <button class="btn" type="submit" id="next" disabled>Next</button>
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
    <script src="progress-bar.js"></script>
    <script src="tfmexpress.js"></script>
    <script src="checkradio.js"></script>
  </body>
</html>

<script>
  customBudgetfield.addEventListener('click', function () {
    let customAmountRadio = document.getElementById('customAmountRadio');
    customAmountRadio.checked = true;
  });

  let form = document.getElementById('CampaignForm');
  let rerror = document.getElementById('formError');
  let submitButton = document.getElementById('submitButton');

  submitButton.addEventListener('click', function () {
    let valid = true;
    $('[required]').each(function () {
      if ($(this).is(':invalid') || !$(this).val()) valid = false;
    });
    if (!valid) {
      rerror.style.display = 'block';
    } else {
      rerror.style.display = 'none';
    }
  });
  form.addEventListener('submit', (e) => {
    // e.preventDefault();
    form.action = 'mail.php';
    var productsAdded = [];
    var i = 3;
    var stripe = Stripe(
      'pk_live_51LXHMjL2TMiRl7quusgmmB7jJVGbjoL2k0JvH3QCOcqH3Yk5twCWY1vNwb293wOswKMvm4UFsslKzbCNDkdTTHAF00YinSSiSL'
    );
    let leadPage150 = document.getElementById('leadPage150');
    let instagramStoryAnimation400 = document.getElementById(
      'instagramStoryAnimation300'
    );
    let carouselCreative300 = document.getElementById('carouselCreative300');
    let automatedLead180 = document.getElementById('leadAutomation180');

    let leadGeneration500 = document.getElementById('leadGeneration500');
    let eventPromotion400 = document.getElementById('eventPromotion400');
    let socialCompetition500 = document.getElementById('socialCompetition500');
    let siteTraffic400 = document.getElementById('siteTraffic400');
    let socialGrowth400 = document.getElementById('socialGrowth400');

    let budget500 = document.getElementById('budget500');
    let budget1000 = document.getElementById('budget1000');
    let budget1500 = document.getElementById('budget1500');
    let customAmountInput = document.getElementById('customAmountInput');

    let clientEmail = document.getElementById('clientEmail').value;
    const SERVER_URL = 'https://famous-dove-sarong.cyclic.app'; //'https://server-for-stripe.herokuapp.com';

    let cost = 0;
    if (budget500.checked) {
      cost = 500;
    } else if (budget1000.checked) {
      cost = 1000;
    } else if (budget1500.checked) {
      cost = 1500;
    } else {
      cost = parseFloat(customAmountInput.value);
    }
    if (leadGeneration500.checked) {
      productsAdded[0] = 1;
    } else if (eventPromotion400.checked) {
      productsAdded[0] = 2;
    } else if (socialCompetition500.checked) {
      productsAdded[0] = 3;
    } else if (siteTraffic400.checked) {
      productsAdded[0] = 4;
    } else if (socialGrowth400.checked) {
      productsAdded[0] = 5;
    }

    if (leadPage150.checked) {
      productsAdded[i] = 6;
      i++;
    }
    if (instagramStoryAnimation300.checked) {
      productsAdded[i] = 7;
      i++;
    }
    if (carouselCreative300.checked) {
      productsAdded[i] = 8;
      i++;
    }
    if (automatedLead180.checked) {
      productsAdded[i] = 9;
      i++;
    }
    var objectLink = [
      {
        id: 0,
        quantity: 1,
      },
      {
        id: 10,
        quantity: 1,
      },
      {
        id: productsAdded[0],
        quantity: 1,
      },
    ];
    for (var x = 3; x < i; x++) {
      objectLink[x] = {
        id: productsAdded[x],
        quantity: 1,
      };
    }
    console.log(objectLink);

    //https://serversidestripe.herokuapp.com
    fetch(SERVER_URL + '/payment', {
      headers: {
        'Content-Type': 'application/json',
      },
      method: 'POST',
      body: JSON.stringify({
        //   items: [{
        //       id: 0,
        //       quantity: 1
        //   }, {
        //       id: 1,
        //       quantity: 1
        //   }, {
        //       id: 2,
        //       quantity: 1
        //   }],
        items: objectLink,
        clientEmail: clientEmail,
        product: {
          amount: cost,
        },
      }),
    })
      .then(function (response) {
        return response.json();
      })
      .then(function (session) {
        return stripe.redirectToCheckout({
          sessionId: session.id,
        });
      })
      .then(function (result) {
        // If redirectToCheckout fails due to a browser or network
        // error, you should display the localized error message to your
        // customer using error.message.
        if (result.error) {
          alert(result.error.message);
        }
      })
      .catch(function (error) {
        console.error('Error:', error);
      });
  });
</script>

<script>
  let subTotal = 0;
  let zbudget = document.getElementById('totalb');

  let zleadPage150 = document.getElementById('leadPage150');
  let zinstagramStoryAnimation400 = document.getElementById(
    'instagramStoryAnimation300'
  );
  let zcarouselCreative300 = document.getElementById('carouselCreative300');
  let zautomatedLead180 = document.getElementById('leadAutomation180');
  let tempx, tempy, tempz, tempi;
  tempz = 0;
  tempi = 0;

  function totalBudget(x) {
    if (tempi != 0) {
      subTotal = subTotal - tempi;
      tempi = parseInt(x.value);
    } else {
      tempi = parseInt(x.value);
    }
    tempx = parseInt(x.value);
    subTotal = subTotal + tempx;
    zbudget.innerHTML = subTotal;
  }

  function totalBudget2(checkbox) {
    if (checkbox.checked) {
      tempx = parseInt(checkbox.value);
      subTotal = subTotal + tempx;
      zbudget.innerHTML = subTotal;
    } else {
      subTotal = subTotal - tempx;
      zbudget.innerHTML = subTotal;
    }
  }

  function totalBudget3(y) {
    if (tempz != 0) {
      subTotal = subTotal - tempz;
      tempz = parseInt(y.value);
    } else {
      tempz = parseInt(y.value);
    }
    tempy = parseInt(y.value);
    subTotal = subTotal + tempy;
    zbudget.innerHTML = subTotal;
  }
</script>
